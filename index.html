<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/@primer/css@^20.2.4/dist/primer.css" rel="stylesheet" />
</head>

<body class="m-3 p-1 p-1">
    <div class="form-group">
        <div class="form-group-header">
            <h1 class="text-normal lh-condensed">AnyNote</h1>
        </div>
        <div class="form-group-body">
            <textarea class="form-control" placeholder="Type here..." id="note"></textarea>
        </div>
    </div>

    <div class="form-actions">
        <button class="btn btn-primary" onclick="submit()">Submit</button>
    </div>


    <div class="d-flex flex-column flex-md-row flex-items-center flex-md-items-center">
        <div class="col-12 col-md-10 d-flex flex-column flex-justify-center flex-items-center flex-md-items-start">
            <h1 class="text-normal lh-condensed">Links</h1>
            <a class="link" href="https://github.com/bestK/anynote">Source code</a>
            <div id="your_link">

            </div>
        </div>
    </div>



</body>
<script>

    const server_api = "https://note.anysign.xyz"


    function submit() {
        alert()
        var note_dom = document.getElementById('note')
        var key = randomString(6)
        var value = note_dom.value
        var value = editor.getText();
        if (!value) {
            alert('value must not be null!')
            return
        }
        var your_link_dom = document.getElementById("your_link")
        var data = { 'key': key, 'value': value }
        request("POST", `${server_api}/set`, data, function (response) {
            your_link_dom.innerHTML = response;
        })

    }

    function request(method, action, params, cb) {
        const request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (request.readyState == 4 && request.status == 200) {
                cb(request.responseText); // Another callback here
            }
        };
        request.open(method, action, true);
        if ('POST' === method) {
            request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            request.send(JSON.stringify(params));
        } else {
            request.send();
        }
    }

    function randomString(length) {
        var str = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var result = '';
        for (var i = length; i > 0; --i)
            result += str[Math.floor(Math.random() * str.length)];
        return result;
    }

</script>


</html>
